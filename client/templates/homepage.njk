{% extends "layout.njk" %}
{%block content%}
	<div class="container mx-auto content max-w-3xl">
		<div class="sm:flex">
			<div class="mt-4 sm:w-2/3">
				<div class="items-center mb-4">
					<h2 class="text-2xl font-bold">Upcoming events</h2>
					{%if flags.manageEvents%}
						<a href="/my-events" class="text-blue-700 hover:underline sm:text-xs ml-auto mr-4 text-xl"><i class="fas fa-sliders-h"></i> Manage Events</a>
						{%endif%}
				</div>
				{{eventsList(events)}}
			</div>

			<div class="mt-4 sm:w-1/3 bg-gray-100 p-2">
				<h2 class="text-2xl font-bold mb-4">Past events</h2>
				{{eventsList(past, showDate=false, showDescription=false)}}
			</div>
		</div>
	</div>
{%endblock%}

{%macro eventsList(events, format=date.format, showDate=true, showDescription=true)%}
<ul class="list-disc pl-4">
	{% for event in events %}
		<li class="py-2">
			<h3 class="text-lg">
				<a
					href="/events/{{event.slug}}"
					class="text-blue-700 hover:underline"
					>{{event.name}}{{' - ' + format(event.date, "PP") if showDate}}</a
				>
			</h3>
					{%if showDescription%}
					<details>
						<summary class="cursor-pointer">View Description</summary>

						<div class="trix-c">{{event.description | safe}}</div>
					</details>
					{%endif%}
		</li>
	{%else%}
		No events found

	{%endfor%}

</ul>
{%endmacro%}
